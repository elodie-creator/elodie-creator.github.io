<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. Désherbeur </title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script defer src="js/app.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="shortcut icon" href="img/icon.png" type="image/x-icon">
</head>
<body>

<!-- Page containing the sensors status of the robot -->
<div  id="sensors">
    <div class="menu">
        <button class="backbtn" onclick="changerPage('Accueil.html')" style="cursor: pointer;">
            <i class="fa-solid fa-arrow-left"></i>
        </button>
        <h2 class="title">Statut des capteurs</h2>
    </div>

    <div class="content">
        <table class="informations-table" style="margin-bottom: 20px;">
            <thead>
                <tr>
                    <th> Capteurs</th>
                    <th> Statut</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Actuateur de déserbage gauche</td>
                    <td id="sen1"></td>
                    
                </tr>
                <tr>
                    <td>Actuateur de déserbage milieu</td>
                    <td id="sen2"></td>
                    
                </tr>
                <tr>
                    <td>Actuateur de déserbage droite</td>
                    <td id="sen4"></td>
                    
                </tr>
                <tr>
                    <td>Actuateur latéral</td>
                    <td id="sen5"></td>
                    
                </tr>
                <tr>
                    <td>Caméra avant</td>
                    <td id="sen6"></td>
                    
                </tr>
                <tr>
                    <td>Caméra arrière</td>
                    <td id="sen7"></td>
                    
                </tr>
                <tr>
                    <td>Caméra coté droite</td>
                    <td id="sen8"></td>
                   
                </tr>
                <tr>
                    <td>Caméra coté gauche</td>
                    <td id="sen9"></td>
                </tr>
                <tr>
                    <td>Caméra de désherbage</td>
                    <td id="sen10"></td>
                </tr>
                <tr>
                    <td>Moteur roue avant droite</td>
                    <td id="sen11"></td>
                </tr>
                <tr>
                    <td>Moteur roue avant gauche</td>
                    <td id="sen12"></td>
                </tr>
                <tr>
                    <td>Moteur roue arrière droite</td>
                    <td id="sen13"></td>
                </tr>
                <tr>
                    <td>Moteur roue arrière gauche</td>
                    <td id="sen3"></td>
                </tr>


            </tbody>
        </table>

        <div class="btn-container" style="margin-top:30px;">
            <button class="btn btn-danger" style="display:flex; justify-content: center; gap:15px;">
                <i class="fa-solid fa-triangle-exclamation"></i>
                <span>ARRÊT D'URGENCE</span>
                <i class="fa-solid fa-triangle-exclamation"></i>
            </button>
        </div>
    
        </div>
            <!-- BOUTON TEMPORAIRE POUR MANIPULATION DES ÉTATS
            <div>
                <button id="SEN" class="btn" onclick="ChangeValue('SEN')">0</button> 
            </div>-->
        </div>
    </div>
    

</div>

     <script>
             var Sen = 1;
            function changerPage(page) {
                window.location.href = page;
            }

            document.addEventListener('click', functionStatut );

            function functionStatut(){
                // Variable statut
                //const sensorStatus = localStorage.getItem("SEN");
                
                //var Sen = parseInt(sensorStatus, 10);
                //var Sen = 1;

                for(i=1; i<=10; i++){

                    var S = document.getElementById(`sen${i}`);
                    if (Sen === 1) {
                        S.innerHTML = '<i class="fa-regular fa-circle-xmark" style="color: #FF0000;"></i><i style="color: #FF0000;"> ERREUR </i>';
                    } else if (Sen === 2) {
                        S.innerHTML = '<i class="fa-solid fa-check" style = "color: #00A300;"></i> <i class="ok-status">OK</i>';
                    } else if (Sen === 0){
                        S.innerHTML = '<i class="fa-solid fa-triangle-exclamation" style="color: #FFA500;"></i> <i style="color: #FFA500;"> AVERTISSEMENT</i>';  
                    } else{};
                }
                // TEMPORAIRE 
                for(i=12; i<=13; i++){
                if (Sen === 2) {
                    S.innerHTML = '<i class="fa-regular fa-circle-xmark" style="color: #FF0000;"></i><i style="color: #FF0000;"> ERREUR </i>';
                } else if (Sen === 1) {
                    S.innerHTML = '<i class="fa-solid fa-check" style = "color: #00A300;"></i> <i class="ok-status">OK</i>';
                } else if (Sen === 0){
                    S.innerHTML = '<i class="fa-solid fa-triangle-exclamation" style="color: #FFA500;"></i> <i style="color: #FFA500;"> AVERTISSEMENT</i>';  
                } else{};
                }

                for(i=14; i<=14; i++){
                if (Sen === 0) {
                    S.innerHTML = '<i class="fa-regular fa-circle-xmark" style="color: #FF0000;"></i><i style="color: #FF0000;"> ERREUR </i>';
                } else if (Sen === 2) {
                    S.innerHTML = '<i class="fa-solid fa-check" style = "color: #00A300;"></i> <i class="ok-status">OK</i>';
                } else if (Sen === 1){
                    S.innerHTML = '<i class="fa-solid fa-triangle-exclamation" style="color: #FFA500;"></i> <i style="color: #FFA500;"> AVERTISSEMENT</i>';  
                } else{};
                }
               
            }
        // SCRIPT TEMPORAIRE POUR L'ÉTAT DES BOUTON TEMPORAIRE

        function ChangeValue(nomBouton) {
            var buttonValueI = localStorage.getItem(nomBouton); 
            var buttonValue = (buttonValueI + 1) % 3;
            document.getElementById(nomBouton).innerText = buttonValue;
            localStorage.setItem(nomBouton, buttonValue);
        }

        document.addEventListener('DOMContentLoaded', recupBouton); 
        function recupBouton () {
            document.getElementById("SEN").innerText=localStorage.getItem("SEN");
            functionStatut();
        }

        
    </script>
</body>


