<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. Désherbeur </title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script defer src="js/app.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="shortcut icon" href="img/icon.png" type="image/x-icon">
</head>
<body>

    <div>
        <div class="menu">
            <button class="backbtn" onclick="changerPage('Accueil.html') " style="cursor: pointer;">
                <i class="fa-solid fa-arrow-left"></i>
            </button>
            <h2 class="title"> Désherbage Automatique</h2>
        </div>
        <div style="border: 5px solid; border-color: aliceblue; padding-bottom: 20px; background-color: #18487a; width: 100%; ">
            <div>`
                <h2 style="color: aliceblue;text-align: center">Planches envoyées</h2>

            </div>
            <div class="content" style="color: aliceblue;text-align: center; font-size: 20px;">
                <ul id="listePlanches"></ul>
            </div>
        </div>
        <div>
            <div class="btn-container" style=" margin-top:20px;">
                <button onclick="Depart()" class="btn" style="display:flex; justify-content: center; width: 100%;"> Débuter l'itinéraire </button>
                <button onclick="Arret()" class="btn" style="display:flex; justify-content: center; width: 100%;"> Arrêt </button>
                <button onclick="home()" class="btn" style="display:flex; justify-content: center; width: 100%;"> Arrêt et retour au chargeur</button>
                <button onclick="AnnulerPlanche()" class="btn"  id="BoutonAnnuler" style="display:flex; justify-content: center; width: 100%;">Annuler les planches sélectionnées</button>
            </div>  

            <div class="btn-container" style="margin-top:20px;">
                <button class="btn btn-danger" style="display:flex; justify-content: center; gap:15px;">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                    <span>ARRÊT D'URGENCE</span>
                    <i class="fa-solid fa-triangle-exclamation"></i>
                </button>
            </div>
        </div>
    </div>


    <script>
    // CHANGER LA PAGE AVEC LE BACKBUTTON
    function changerPage(page) {
        window.location.href = page;
    }

    // OUVERTURE DE LA PAGE
    document.addEventListener('DOMContentLoaded', creeListe);
    function creeListe() {
            // Récupérer la liste des jardins depuis le localStorage
        for(j=1;j<=11;j++){
            const jardin =` Jardin ${j}`;
            for(i=1;i<=16;i++){
                // Récupérer les planches associées à ce jardin
                const planches = JSON.parse(localStorage.getItem(`selectedPlanches_${jardin}_${i}`)) || [];
                if (planches == true){
                    // Afficher les planches dans une liste
                    const listePlanches = document.getElementById('listePlanches');
                    const listItem = document.createElement('li');
                    listItem.textContent = `${jardin}: Planche ${i}`;
                    listePlanches.appendChild(listItem);
                }  
            }
        }

    };


    // ---- BOUTTON POUR RETOURNER À LA BASE ----
    function home() { // envoye a la maison 
      var userConfirmation = confirm('Voulez-vous arrêter le déserbage et retourner le robot à sa base');
      if (userConfirmation) {
        //À FAIRE
        localStorage.setItem("envoyer", false);
        changerPage('ParametreDesherb.html');
      } else {}
    }

    //---- BOUTTON ANNULER PLANCHE ----
    function AnnulerPlanche(){ // fonction qui efface les plache dasn la liste
        var userConfirmation = confirm('Voulez-vous Annuler les planches sélectionnées?');
        if (userConfirmation) {
            localStorage.setItem("envoyer", false);
            changerPage('ParametreDesherb.html')
        } else {}
    }
    function Depart(){
        //À FAIRE
    }

    function Arret(){
        //à FAIRE
    }
    



    </script>

</body>
